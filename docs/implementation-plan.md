# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã Atlantis FastAPI

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- ‚úÖ TrainingTemplate –∏ TrainingStudentTemplate:
  - –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –∏ —Å–≤—è–∑–∏
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–º–æ—Ä–æ–∑–∫–∏ —É—á–∞—Å—Ç–∏—è
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ —à–∞–±–ª–æ–Ω–∞—Ö

- ‚úÖ RealTraining –∏ RealTrainingStudent:
  - –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –∏ —Å–≤—è–∑–∏
  - –°—Ç–∞—Ç—É—Å—ã –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ (PRESENT, ABSENT)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–º–µ–Ω—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
  - –°–≤—è–∑—å —Å –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞–º–∏
  - –ü–æ–ª–µ notification_time
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–º–µ–Ω—ã (12 —á–∞—Å–æ–≤)
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –ø–µ—Ä–µ–Ω–æ—Å–æ–≤

- ‚úÖ StudentMonthlyStats:
  - –ú–æ–¥–µ–ª—å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–µ—Ä–µ–Ω–æ—Å–æ–≤
  - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
  - –°–µ—Ä–≤–∏—Å —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–∏–º–∏—Ç–∞ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ (3 –≤ –º–µ—Å—è—Ü)

#### –§–∏–Ω–∞–Ω—Å—ã
- ‚úÖ StudentSubscription:
  - –ü–æ–ª–µ sessions_left –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
  - –ü–æ–ª–µ transferred_sessions –¥–ª—è —É—á–µ—Ç–∞ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤
  - –ü–æ–ª–µ auto_renewal_invoice_id –¥–ª—è –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏—è
  - –ü–æ–ª—è freeze_start_date –∏ freeze_end_date
  - –ü–æ–ª–µ status –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

- ‚úÖ Invoice:
  - –°—Ç–∞—Ç—É—Å—ã: UNPAID/PAID/CANCELLED
  - –¢–∏–ø—ã: SUBSCRIPTION/TRAINING
  - –ü–æ–ª—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è/–æ–ø–ª–∞—Ç—ã/–æ—Ç–º–µ–Ω—ã
  - –°–≤—è–∑—å —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏
  - –ü–æ–ª–µ is_auto_renewal –¥–ª—è –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏—è

- ‚úÖ Payment:
  - –°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –æ—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–µ–π
  - –°–≤—è–∑—å —Å –∫–ª–∏–µ–Ω—Ç–æ–º
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è/–æ—Ç–º–µ–Ω—ã

### 2. –°–µ—Ä–≤–∏—Å—ã

#### –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- ‚úÖ RealTrainingService:
  - –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏
  - –û—Ç–º–µ–Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
  - –£—á–µ—Ç –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–µ—Ä–µ–Ω–æ—Å–∞–º–∏

- ‚úÖ StudentStatsService:
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–∏–º–∏—Ç–æ–≤
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤

#### –§–∏–Ω–∞–Ω—Å—ã
- ‚úÖ SubscriptionService:
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞–º–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ —Å—Ç—É–¥–µ–Ω—Ç—É
  - –ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤
  - –ó–∞–º–æ—Ä–æ–∑–∫–∞/—Ä–∞–∑–º–æ—Ä–æ–∑–∫–∞
  - –ü–µ—Ä–µ–Ω–æ—Å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
  - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è

- ‚úÖ InvoiceService:
  - –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–æ–≤ (–∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã/—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏)
  - –û—Ç–º–µ–Ω–∞ –∏–Ω–≤–æ–π—Å–æ–≤
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≥–∞—à–µ–Ω–∏–µ
  - –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–æ–≤ –¥–ª—è –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏—è

- ‚úÖ PaymentService:
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
  - –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–µ–π
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º –∫–ª–∏–µ–Ω—Ç–∞
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

### 3. API Endpoints

#### –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏:
  - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏

- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏:
  - –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤
  - –û—Ç–º–µ–Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
  - –£—á–µ—Ç –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
  - –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–Ω–æ—Å–∞–º–∏

#### –§–∏–Ω–∞–Ω—Å—ã
- ‚úÖ –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã:
  - `POST /subscriptions` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–∞ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
  - `GET /subscriptions` - —Å–ø–∏—Å–æ–∫ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤
  - `PATCH /subscriptions/{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
  - `POST /subscriptions/student` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç—É
  - `PATCH /subscriptions/student/{id}/auto-renewal` - –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ
  - `POST /subscriptions/student/{id}/freeze` - –∑–∞–º–æ—Ä–æ–∑–∫–∞
  - `POST /subscriptions/student/{id}/unfreeze` - —Ä–∞–∑–º–æ—Ä–æ–∑–∫–∞
  - `POST /subscriptions/student/{id}/transfer` - –ø–µ—Ä–µ–Ω–æ—Å

- ‚úÖ –ò–Ω–≤–æ–π—Å—ã:
  - `GET /invoices/{id}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–Ω–≤–æ–π—Å–µ
  - `GET /invoices/student/{id}` - –∏–Ω–≤–æ–π—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
  - `POST /invoices/subscription` - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–ª—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
  - `POST /invoices/training` - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
  - `POST /invoices/{id}/cancel` - –æ—Ç–º–µ–Ω–∞ –∏–Ω–≤–æ–π—Å–∞

- ‚úÖ –ü–ª–∞—Ç–µ–∂–∏:
  - `POST /payments` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞
  - `DELETE /payments/{id}` - –æ—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞
  - `GET /payments/client/{id}` - –ø–ª–∞—Ç–µ–∂–∏ –∫–ª–∏–µ–Ω—Ç–∞
  - `GET /payments/client/{id}/balance` - –±–∞–ª–∞–Ω—Å –∫–ª–∏–µ–Ω—Ç–∞

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º

#### ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–º–µ–Ω—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –Ω–∞—á–∞–ª–∞ (12 —á–∞—Å–æ–≤)
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ (3 –≤ –º–µ—Å—è—Ü)
3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤
4. –í–æ–∑–≤—Ä–∞—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤ –∞–±–æ–Ω–µ–º–µ–Ω—Ç –ø—Ä–∏ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ—Ç–º–µ–Ω–µ

#### ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å —É—á–µ—Ç–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
2. –°–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
3. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### Unit —Ç–µ—Å—Ç—ã
- üîÑ –¢–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤:
  - üîÑ RealTrainingService
  - üîÑ StudentStatsService
  - üîÑ SubscriptionService
  - üîÑ InvoiceService
  - üîÑ PaymentService

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫:
  - üîÑ –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç–º–µ–Ω–∞
  - üîÑ –£—á–µ—Ç –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
  - üîÑ –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤

- üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤:
  - üîÑ –ü–æ–∫—É–ø–∫–∞ –∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤
  - üîÑ –ó–∞–º–æ—Ä–æ–∑–∫–∞ –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã
  - üîÑ –ü–ª–∞—Ç–µ–∂–∏ –∏ –∏–Ω–≤–æ–π—Å—ã
  - üîÑ –ë–∞–ª–∞–Ω—Å –∫–ª–∏–µ–Ω—Ç–æ–≤

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üîÑ Swagger/OpenAPI
- üîÑ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ API
- üîÑ –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã:
  - üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏
  - üîÑ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
  - üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º

## –£—Å–ª–æ–≤–Ω—ã–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- üîÑ - –í –ø—Ä–æ—Ü–µ—Å—Å–µ
- ‚ùå - –ù–µ –Ω–∞—á–∞—Ç–æ 